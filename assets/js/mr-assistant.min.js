!function(){"use strict";let t=function(){},e=new t;t.prototype.common=function(){function t(t,e=!1){let n=t.split(" ").filter(t=>t).join(" "),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"/"};e&&(a["/"]="&#x2F;");return n.replace(/[&<>"'\/]/gi,t=>a[t])}function e(t,e={expires:1,path:"/",domain:window.location.hostname,secure:!0}){return Cookies.get(t,{expires:e.exp,path:e.path,domain:e.domain,secure:e.secure})}function n(t){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)}function a(t){try{if(void 0!==t)return JSON.parse(t)}catch(t){return!1}return!1}function s(t){try{let e=localStorage.getItem("mrAssistantSounds");if(e&&"mute"===e)return;let n=document.getElementById(t);if(n){let t=n.play();void 0!==t&&t.catch(function(t){"on"===mrAssistantObj.dev&&console.info(t)})}}catch(t){}}async function o(t,e,n,a="bg",s=""){await new Promise(t=>{const a=new Image;a.src=e,a.onload=(()=>t(e)),a.onerror=(()=>t(n))}).then(function(n){if(n===e)return;let o=document.getElementById("mrImg-"+t);o&&("img"===a?o.innerHTML='<img width="'+s+'" src="'+n+'"/>':"imgSrc"===a?o.src=n:o.style.backgroundImage="url("+n+")")})}return{timeAgo:function(t,e=""){const n=new Date(t),a=new Date-n,s=Math.floor(a/864e5),o=Math.floor(a%864e5/36e5),r=Math.round(a%864e5%36e5/6e4);return"min"===e?r:s>0?s>1?s+" days ago":s+" day ago":o>0?o>1?o+" hours ago ":o+" hour ago":r>0?r>1?r+" mins ago ":r+" min ago":n.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},timeDiffSeconds:function(t,e=Date.now()){if(t=parseInt(t),e=parseInt(e),t&&e)return(e>t?e-t:t-e)/1e3;return 0},mrSearch:function(t,e){let n=!1,a=!0,s=!0,o=!0,r=!0;if(e&&t){let i=e.match(/[^_\W]+/g);if(null!==i){let e=i.map(function(t){return t.toLowerCase()});return Object.keys(t).forEach(function(i){n=!1,t[i]instanceof Array?Object.keys(t[i]).forEach(function(a){n||-1===e.indexOf(t[i][a].toLowerCase())||(n=!0)}):-1!==e.indexOf(t[i].toLowerCase())&&(n=!0),0==i?a=n:1==i?s=n:2==i?o=n:3==i&&(r=n)}),!!(a&&s&&o&&r)}return!1}return!1},generateGUID:function(){return"xxxsxxxxxhxxxxayxpxxxxxxoxxxyyxxnxxx".replace(/[xy]/g,function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},getBrowser:function(){const t=function(t){return t.test(window.navigator.userAgent)};switch(!0){case t(/edge/i):return"Microsoft Edge";case t(/opr/i)&&(!!window.opr||!!window.opera):return"Opera";case t(/chrome/i)&&!!window.chrome:return"Google Chrome";case t(/trident/i):return"Internet Explorer";case t(/firefox/i):return"Mozilla Firefox";case t(/safari/i):return"Safari";default:return"unknown"}},whiteSpaces:function(e){return t(e)},sanitize:t,getUrlPath:function(t="",e="path"){let n=new URL(""!==t?t:document.location.href);return"domain"===e?n.origin:"path"===e?n.pathname:void 0},playSound:s,split:function(t){let e,n,a=t.split(new RegExp(": | -- | -","g"));return a.length>=2?(e=a[0],n=t.replace(e,"").trim()):(e=t.replace(/ .*/,"").trim()||"",n=t.replace(e,"").trim()),[e,n]},getObject:function(t){const e=document.querySelectorAll(t);let n={};for(let t=0;t<e.length;t++){const a=e[t].dataset.action,s=e[t].dataset.key;if("text"===a&&(n[s]=e[t].value),"checkbox"===a&&(n[s]=1==e[t].checked?1:0),"select"===a&&(n[s]=e[t].options[e[t].selectedIndex].value),"radio"===a){const a=e[t].querySelector("input[name="+s+"]:checked");n[s]=a?a.value:"1"}}return n},setCookie:function(t,e,n={expires:1,path:"/",domain:window.location.hostname,secure:!0}){return Cookies.set(t,e,{expires:n.exp,path:n.path,domain:n.domain,secure:n.secure})},getCookie:e,getCookieObj:function(t){return a(e(t))},getDateTime:function(t){let e=new Date(t),n=function(t){return e.getHours()>12?t?e.getHours()-12:" PM":t?e.getHours():" AM"};return e.getDate()+" "+["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][e.getMonth()+1]+" AT "+n(!0)+":"+e.getMinutes()+n(!1)},loaderText:function(){return'<div class="single-item mr-spinner-full"><div class="mr-spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div>'},mrLoader:function(t=!1){const e=document.querySelectorAll(".mr-spinner");e&&e.forEach(t=>t.remove());const n=document.createElement("DIV");n.setAttribute("class","mr-spinner"),n.innerHTML='<div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div>';let a=document.getElementById("cbMessages");t&&a&&(a.appendChild(n),a.scrollIntoView({behavior:"smooth",block:"end"}))},typeLoader:function(t=!1){const e=document.querySelectorAll(".tp-wrapper");e&&e.forEach(t=>t.remove());let a=mrAssistantObj.plugin_url+"assets/images/mr-assistant.svg",r=mrAssistantObj.hasOwnProperty("avatar")&&n(mrAssistantObj.avatar)?mrAssistantObj.avatar:a;const i=document.createElement("DIV");i.setAttribute("class","tp-wrapper fade");let c=Math.floor(92992343*Math.random()+1);i.innerHTML=`<img id="mrImg-${c}" src="${r}" class="avatar"/><div class="tp-container"><div class="tp-balls"><span></span><span></span><span></span></div></div>`;const l=document.getElementById("cbMessages");t&&l&&(s("au-typing"),l.appendChild(i),o(c,r,a,"imgSrc",25)),l&&l.scrollIntoView({behavior:"smooth",block:"end"})},localDB:function(t,e,n={},a=!1){let s=[];try{let e=JSON.parse(localStorage.getItem(t));e&&e.length>0&&e.forEach(t=>s.push(t))}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}return"get"===e?s:"set"===e?(a&&(s=[]),s.push(n),localStorage.setItem(t,JSON.stringify(s))):void 0},getRandomInt:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},jsonParse:a,isValidURL:n,image:o,isset:function(t){try{return void 0!==t}catch(t){return!1}}}}(),t.prototype.conn=function(){let t,n,a="",s={},o="",r={},i=null;function c(t){t&&(firebase.database().ref("clients").child(t.uid).child("settings").on("value",function(t){try{let e=t.val();e&&(n=Object.assign({},e)),e&&e.hasOwnProperty("block")&&localStorage.setItem("mrAssistantBlock",e.block),e&&e.hasOwnProperty("mrSupport")&&localStorage.setItem("mrAssistantSupport",e.mrSupport)}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}}),firebase.database().ref("clients").child(t.uid).child("actions").on("child_added",function(n){e.common.typeLoader(!1);let a=n.key,s=n.val();if(s){let n=s.actionType,o=s.actionName,r=s.status,i=s.time;if("pending"!==r)return;e.common.timeDiffSeconds(i)<=10?firebase.database().ref("clients").child(t.uid).child("actions").child(a).update({status:"Executed"}).then(function(){"expend"!==localStorage.getItem("mrAssistantDom")&&e.init.chat_start()}).then(function(){if(e.common.setCookie("mrRobotAutoAction",0,5),e.common.setCookie("mrRobotSession",e.common.generateGUID(),5),"survey"===n&&"signUp"===o)e.form.surveyForm(o);else if("search"===n&&""!==s.subAction)if("redirect"===s.subAction)try{new URL(o);e.init.popMessage({title:e.translate.get("Suggestion","_txcwpm21"),content:e.translate.get("Admin has suggested for this page. Click on view now button to open this.","_txcwpm22"),type:"redirect",button:e.translate.get("View Now","_txcwpm23"),action:o}),p(e.translate.get("Admin has suggested for this page.","_txcwpm12"))}catch(e){firebase.database().ref("clients").child(t.uid).child("actions").child(a).update({status:"Dropped"})}else"search"===s.subAction?e.controller.bot(o,{cuAction:1,kbAction:1,sbAction:1}):"kb"===s.subAction&&e.controller.bot(o,{cuAction:0,kbAction:1});else if("help"===n&&"HelpMenu"===o)e.init.mrHelpMenuExecute(null);else if("feedback"===n&&"Feedback"===o)e.form.feedbackForm(o);else if("menuAction"===n&&"menuAction"===o){const t=document.querySelector(".mr_menus");t&&t.click()}else if("botStatus"===o){let t=document.querySelector(".cb_bot");t&&t.click()}else"endChat"===o?u():firebase.database().ref("clients").child(t.uid).child("actions").child(a).update({status:"Dropped"});e.common.typeLoader(!1)}):firebase.database().ref("clients").child(t.uid).child("actions").child(a).update({status:"Dropped"})}}))}function l(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let n=t.target.parentNode;const a=document.querySelectorAll(".mr_action_btn");if(n.classList.contains("mr_action_btn")){let t=n.dataset.action;if("signin"===t)m();else if("signout"===t)u();else if("rateChat"===t)e.form.feedbackForm("feedback");else if("pausedBot"===t){const t=document.querySelector(".cb_bot");if(t){document.getElementById("menuBotStatus");t.click()}}else"muteSounds"===t?(localStorage.setItem("mrAssistantSounds","mute"),a&&a.forEach(function(t){let e=t.dataset.action;e&&"playSounds"===e&&(t.style.display="flex"),e&&"muteSounds"===e&&(t.style.display="none")})):"playSounds"===t&&(localStorage.setItem("mrAssistantSounds","play"),a&&a.forEach(function(t){let e=t.dataset.action;e&&"playSounds"===e&&(t.style.display="none"),e&&"muteSounds"===e&&(t.style.display="flex")}))}}function u(){const t=firebase.auth().currentUser;t?t.delete().then(function(){window.frames.location.reload()}).catch(function(t){"on"===mrAssistantObj.dev&&console.info(t),p(e.translate.get(t.message,"_txcwsi201"))}):p(e.translate.get("Please introduce yourself","_txcwsi1"))}function m(){return e.form.surveyForm("signUp")}function d(){firebase.auth().onAuthStateChanged(function(t){if(!t)return;let n=firebase.database().ref("clients").child(t.uid);n.child("info").on("value",function(t){let e=t.val();if(e.name&&(r=Object.assign(r,{clientName:e.name})),!e||!e.marge){const t=firebase.auth().currentUser;let e={isNewUser:!0,marge:!0,domain:window.location.hostname,lastSeen:Date.now(),join:Date.now()};n.child("info").update(e),n.child("settings").update({archive:"unarchived",block:"unblock",mrSupport:"on",kbSupport:"on",scSupport:"on",sbSupport:"on",status:"active",uEndChat:"start"});let a="";n.child("conversation").child("mr-assistant").update({name:mrAssistantObj.name?mrAssistantObj.name:"MR. Assistant",avatar:""!==mrAssistantObj.avatar?mrAssistantObj.avatar:a,join:Date.now(),type:"bot",status:mrAssistantObj.status?"active":"pulse"}).then(function(){firebase.database().ref("actions").child("visitorSignUp").child(t.uid).remove()})}}),n.child("conversation").on("value",function(t){let n=t.val();if(n)try{!function(t){const e=document.getElementById("mr_user_config");let n=[];e&&t&&(Object.keys(t).forEach(function(e){let a=t[e];n[e]={name:a.name||"Anonymous",avatar:a.avatar||""}}),window.mrUsers=Object.assign({},n),e.innerHTML="let mrUsers ="+JSON.stringify(Object.assign({},n)))}(n),e.common.setCookie("mrUserAssets",JSON.stringify(n));let a=e.template.setAvatar(t.key,n),s=document.querySelector(".mr-left-header");if(s&&(s.innerHTML=a),n.hasOwnProperty("mr-assistant")){const t=document.querySelector(".bot-line"),a=document.querySelector(".cb_bot");if(t&&a){"active"===n["mr-assistant"].status?(t.style.display="none",a.dataset.action="running",a.classList.remove("bot-pulse"),p(e.translate.get("Support bot is activated. Now you can search & chat..","_txcwbs1"))):(t.style.display="inline",a.dataset.action="pulse",a.classList.add("bot-pulse"),p(e.translate.get("Support bot is deactivated. Sending to Live Agent.","_txcwbs2")))}}}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}}),t.email&&firebase.database().ref("users").once("value",function(a){let s=a.val();s&&Object.keys(s).forEach(function(a){if(s.hasOwnProperty(a)){let o=s[a];if(t.email===o.email){let a=""!==o.name?o.name+" (Admin)":"You (Admin)";n.child("info").update({join:Date.now(),isAdminUser:!0,marge:!0,name:a,email:o.email}),firebase.database().ref("livechat/").child(t.uid).set(""),firebase.database().ref("browses/").child(t.uid).set(""),firebase.database().ref("clients").child(t.uid).child("actions").set(""),p(`${e.translate.get("Hello ","_txcwkw_hello")} ${a},  ${e.translate.get("You are chatting itself.","_txcwis1")}`)}}})}),firebase.database().ref("mr-assistant").child("name").on("value",function(t){t.val()&&(r=Object.assign(r,{mrAssistant:t.val()}))})})}function p(t){v(t,!0,!0)}function f(n){if(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),null!==firebase.auth().currentUser){const a=firebase.auth().currentUser.uid;firebase.database().ref("livechat").child(a).once("value",function(a){let s=a.val();if(!s)return;let o,r=Object.entries(s),i=r.length||0,c=parseInt(n.target.dataset.step),l=parseInt(n.target.dataset.inset),u=(parseInt(n.target.dataset.counter),l+c),m=i-l,d=m-c>0?m-c:0,p=r.slice(d,m);for(o=p.length;o>=0;o--)if(p[o]){let n=p[o][0];s.hasOwnProperty(n)&&e.template.templateDark(n,s[n],t,"prepend")}n.target.dataset.inset=u,n.target.style.display=i>u?"block":"none"})}}function h(n){const a=document.querySelector(".cbMessages");if(a&&(a.innerHTML=""),n){e.common.mrLoader(!0);const a=function(n){let a=n.val();Date.now()-a.time<2e3&&e.common.playSound("au-message"),e.template.templateDark(n.key,a,t),y(a.text)};firebase.database().ref("livechat").child(n.uid).limitToLast(20).on("child_added",a),firebase.database().ref("livechat/").child(n.uid).once("value",function(t){let e=t.numChildren(),n=document.querySelector(".loadMore");e>20&&(n.dataset.inset=20,n.dataset.step=10,n.dataset.counter=e,n.style.display="block",n.addEventListener("click",f,!0))}),e.common.mrLoader(!1)}else try{let n=e.common.localDB("mrAssistantOfflineChat","get");n&&n.length>0&&n.forEach(function(n){return e.template.templateDark("offline-"+Math.floor(Math.random()*Math.floor(Date.now())),n,t)})}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}}function g(t,n,a){let s={type:a,name:n?n.displayName:"Anonymous",text:t,time:Date.now()};if(!n)return e.common.localDB("mrAssistantOfflineChat","set",s),e.template.templateDark("offline-"+Date.now(),s,"message-visitor");r&&("client"===a?s.name=r.clientName||"Anonymous":"bot"===a&&(s.name=r.mrAssistant||"Mr. Assistant")),firebase.database().ref("livechat").child(n.uid).push(s).catch(function(t){"on"===mrAssistantObj.dev&&console.info(t)}),firebase.database().ref("clients").child(n.uid).child("info").update({lastMessage:t.substring(0,20),lastSeen:Date.now()})}function b(s,o){const r=document.getElementById("mr_sender"),i=document.getElementById("message");let c=null;r&&i&&i.addEventListener("keyup",function(t){13===t.keyCode&&r.click()}),r&&r.addEventListener("click",function(o){if(t.configuration&&"chatOffline"!==t.configuration.chatWay&&n&&"block"===n.block)return v("Oops!! Something happen wrong. Contact to Admin.",!0,!0);o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation();let r=e.common.whiteSpaces(i.value);c&&clearTimeout(c),c=setTimeout(function(){""!==r&&(i.value="",(async()=>{try{let n=localStorage.getItem("mrAssistantBlock");if(n&&"block"===n)return"";if(e.common.playSound("au-message"),mrAssistantObj.hasOwnProperty("cmd")&&"on"===mrAssistantObj.cmd&&"-mr"===r.toLowerCase().replace(/ .*/,""))return a=r,e.controller.mrCommandLine(r);if(s)return function(t,e){if(!t)return;const n=firebase.database().ref().child("clients").child(t.uid);n.child("/info/lastMessage").set(e),n.child("/info/lastSeen").set(Date.now()),n.child("/info/unread").transaction(function(t){return(t||0)+1})}(s,r),a=r,g(r,s,"client");if("chatOffline"===t.configuration.chatWay)return a=r,g(r,s,"client"),await y(r);"chatAnonymously"===t.configuration.chatWay?e.form.signUp({signUp:"Anonymously"},"",!0):m()}catch(t){v("Oops!! Wrong Configuration!!",!0,!0),"on"===mrAssistantObj.dev&&console.info(t)}})())},100)})}const y=async function(o){a===o&&(i&&clearTimeout(i),i=setTimeout(async function(){if("off"!==mrAssistantObj.mrAssistantBot&&t.assistantSupport){if("on"===n.sbSupport&&"active"===n.status){e.common.typeLoader(!0),s.cuAction=!("on"!==n.scSupport||!t.actionBot),s.kbAction=!("on"!==n.kbSupport||!t.kbBot),s.sbAction=!("on"!==n.sbSupport||!t.siteBot),s.wooBot=t.wooBot,s.wooCart=t.wooCart,s.wooCurrency=t.woo_currency;let a=Object.assign({},s,t);e.common.setCookie("mrRobotAutoAction",0,5),e.common.setCookie("mrRobotSession",e.common.generateGUID(),5);let r=localStorage.getItem("mrAssistantSupport");return r&&"off"===r?e.common.typeLoader(!1):await e.controller.bot(o,a)}}else{if(t.configuration&&t.configuration.mrAssistant){e.common.typeLoader(!0),s.cuAction=!!t.configuration.actionBot,s.kbAction=!!t.configuration.kbBot,s.sbAction=!!t.configuration.siteBot,s.wooBot=t.configuration.wooBot,s.wooCart=t.configuration.wooCart,s.wooCurrency=t.configuration.woo_currency;let n=Object.assign({},s,t.configuration);return e.common.setCookie("mrRobotAutoAction",0,5),e.common.setCookie("mrRobotSession",e.common.generateGUID(),5),await e.controller.bot(o,n)}e.common.typeLoader(!1)}},100))};function v(t,e,n=!1){let a=document.querySelector(".mr_status_box");if(!a)return;let s=document.createElement("DIV");s.setAttribute("class","mr_status theme"),s.innerHTML=t,a.style.display=e?"flex":"none",a.innerHTML="",a.append(s),n&&setTimeout(function(t){s.innerHTML=o,a.innerHTML="",a.append(s)},5e3)}return{execute:function(){firebase.auth().onAuthStateChanged(function(n){a="",n?firebase.database().ref("settings").once("value",function(e){let n=e.val();n&&(t=Object.assign({},n.configuration))}).then(function(){b(n),c(n),d(),e.translate.execute()}).then(function(){setTimeout(function(){h(n)},1e3)}):firebase.database().ref("settings").once("value",function(a){try{t=Object.assign({},a.val());let s=Object.assign({},t.configuration?t.configuration:{});if(s.chatWay)switch(s.chatWay){case"chatWithVisitor":e.form.surveyForm("signUp");break;case"chatAnonymously":!function(t=!0){let n={name:e.common.getRandomInt(1e3,9999),email:"",isNewUser:!1,marge:!1,lastSeen:Date.now(),method:"signInAnonymously",type:"liveChat",chatWay:"signInAnonymously",join:Date.now(),status:"active",currentPage:window.location.href,browser:e.common.getBrowser(),language:navigator.languages.join(","),platform:navigator.platform};localStorage.getItem("mrAssistantChatItself")||firebase.auth().signInAnonymously().then(t=>{var a=t.user;a&&(n.uid=a.uid,n.method="signInAnonymously",firebase.database().ref("clients").child(a.uid).child("info").update(n),v(e.translate.get("Welcome!! Now You can search or chat..","_txcwsc1"),!0,!0))}).catch(function(t){v(e.translate.get("Oops!! Something went wrong. Try again!!","_txcwsc2"),!0,!0),"on"===mrAssistantObj.dev&&console.info(t)})}(s.uniqueAnonymous);break;case"chatWithEmail":e.form.surveyForm("signUp");break;case"chatOffline":b(n);break;default:e.form.surveyForm("signUp")}e.translate.execute()}catch(t){v(e.translate.get("Oops!! Something went wrong. Try again!!","_txcwsc2"),!0,!0),"on"===mrAssistantObj.dev&&console.info(t)}}),v(o=mrAssistantObj.offline_text||" ",!0,!1),firebase.database().ref("actions").child("online").on("value",function(t){let n=t.val();if(n.hasOwnProperty("lastSeen")&&n.hasOwnProperty("status")){let t=e.common.timeDiffSeconds(n.lastSeen);"online"===n.status&&t<600?mrAssistantObj.hasOwnProperty("online_text")&&(o=mrAssistantObj.online_text):mrAssistantObj.hasOwnProperty("offline_text")&&(o=mrAssistantObj.offline_text),v(o,!0,!1)}}),firebase.auth().onAuthStateChanged(function(t){const e=document.querySelector(".mr-dropdown");if(e){e.innerHTML="";let n=function(t,n,a,s="",o="flex"){let r=document.createElement("P");r.setAttribute("class","mr_action_btn"),r.setAttribute("style","display: "+o),r.setAttribute("data-action",n),r.addEventListener("click",l,!0);let i=""!==a?a:"bpmn:start-event-parallel-multiple";r.innerHTML=`<span class="iconify mr-svg" data-icon="${i}" data-inline="true"></span><span id="${s}">${t}</span>`,e&&e.appendChild(r)};n("Chat Bot","pausedBot","ant-design:robot-filled","menuBotStatus");let a=localStorage.getItem("mrAssistantSounds"),s=a&&"mute"===a?"none":"flex";n("Enable Sounds","playSounds","si-glyph:sound-mute","playSounds",a&&"mute"===a?"flex":"none"),n("Mute Sounds","muteSounds","subway:sound","muteSounds",s),t?(n("Rate for this chat","rateChat","vaadin:star-half-left-o"),n("End Chat","signout","mdi-light:logout")):n("Start Chat","signin","ant-design:login-outlined")}})})},clear:function(){return c(null),d(),h(null),b(null),""},_conversationInit:d,notification:p,setMessages:g,chatUsers:r}}(),t.prototype.init=function(){let n={},a=0;function s(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let n=t.target.parentNode.dataset.key;const a=document.querySelector(".alc_pop_box"),s=window.frameElement;n&&firebase.database().ref().child("/menus/").child(n).once("value").then(function(t){let n=t.val(),o=document.querySelector(".introMessage");o&&o.remove(),s.style.width="100%",s.style.height="100vh",a.innerHTML=e.common.loaderText(),a.innerHTML=e.template.menuView("menu",n)}).then(function(){let t=document.querySelector(".close_btn");t&&t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),a.innerHTML="",s.style.width="430px",s.style.height="100vh"},!0)})}function o(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.common.mrLoader(!0);let n=document.createElement("DIV");document.querySelectorAll(".mr-cart-count");const a=document.querySelector("#cbBotMessages"),o=mrAssistantObj.plugin_url+"assets/images/menu.svg";let r=function(t){if(e.common.isValidURL(t))return`<img src="${t}"/>`;{let e=t.match(/<span[^>]*>[^>]*<\/span>/g);return e&&e[0]?e[0]:`<img src="${o}"/>`}};firebase.database().ref().child("/menus/").once("value").then(function(t){n.setAttribute("class","viewCart");let a="",s=t.val();if(a+=`<div class="cart-header theme"><div class="cart-title">${e.translate.get("My Menu","_txcwMenu1")}</div>`+'<span class="close-cart-view">X</span></div>',s){let t,e="";for(t in s)if(s.hasOwnProperty(t)){s[t].menuUrl;e+=`<li class="mr-menu-item" data-key="${s[t].menuID}">${r(s[t].menuUrl)}<h4 class="menu-title">${s[t].menuName}</h4></li>`}a+='<ul class="menu-list">',a+=e,a+="</ul>"}else a+=`<div>${e.translate.get("No Menu","_txcwMenu1")}</div>`;n.innerHTML=a}).then(function(){const t=document.querySelectorAll(".viewCart");t&&t.forEach(function(t){t.remove()}),document.querySelector("#cbMessages").append(n),a.querySelectorAll(".mr-loader").forEach(function(t){t.style.display="none"});let e=document.getElementById("cbMessages");e&&e.childNodes.length>2&&e.scrollIntoView({behavior:"smooth",block:"end"});let s=document.querySelector(".viewCart .close-cart-view");s&&s.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const e=document.querySelectorAll(".viewCart");e&&e.forEach(t=>t.remove())},!0)}).then(function(){let t=document.querySelectorAll(".menu-list .mr-menu-item");t&&t.forEach(t=>t.addEventListener("click",s,!0))}),e.common.mrLoader(!1),e.common.typeLoader(!1)}function r(t){let n=t.target.dataset.type,a=t.target.dataset.action;if("redirect"===n){new URL(a);let t=window.open(a,"_blank");if(t&&!t.closed&&void 0!==t.closed)return t.focus();e.conn.notification(e.translate.get("Pop-up Blocked.","_txcwrn2"))}}function i(t){t&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),e.common.mrLoader(!0);let n=document.createElement("DIV");document.querySelectorAll(".mr-cart-count");const a=document.querySelector("#cbBotMessages");firebase.database().ref().child("/help/").once("value").then(function(t){n.setAttribute("class","viewCart");let e="",a=t.val();if(a&&a.hasOwnProperty("helpContent")){e+=`<div class="cart-header theme"><div class="cart-title">${a.helpTitle&&""!==a.helpTitle?a.helpTitle:"Help"}</div><span class="close-cart-view">X</span></div>`,e+='<div class="help-content">',e+=a.helpContent&&""!==a.helpContent?a.helpContent:"",e+="</div>"}else e+="<div></div>";n.innerHTML=e}).then(function(){const t=document.querySelectorAll(".viewCart");t&&t.forEach(t=>t.remove()),document.querySelector("#cbMessages").append(n),a.querySelectorAll(".mr-loader").forEach(t=>t.style.display="none");let e=document.getElementById("cbMessages");e&&e.scrollIntoView({behavior:"smooth",block:"end"});let s=document.querySelector(".viewCart .close-cart-view");s&&s.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const e=document.querySelectorAll(".viewCart");e&&e.forEach(t=>t.remove())},!0)}).then(function(){let t=document.querySelectorAll(".menu-list .mr-menu-item");t&&t.forEach(t=>t.addEventListener("click",s,!0))}),e.common.mrLoader(!1),e.common.typeLoader(!1)}function c(){!function(){const t=document.querySelector(".alc_chatbot");let n=document.querySelector(".close-chat"),a=window.frameElement;a.style.width="430px",a.style.height="100vh";let s=document.querySelectorAll(".tempBox");s&&s.forEach(t=>t.remove()),n&&n.addEventListener("click",function(n){let s=document.querySelector("#alc_chat");t&&s&&(s.remove(),a.style.width="112px",a.style.height="140px");let o=document.querySelector(".introMessage");o&&o.remove();const r=document.querySelector(".alc_pop_box");r&&(r.innerHTML=""),localStorage.setItem("mrAssistantDom","close"),e.common.setCookie("mrAssistantDom","close",{path:document.location.pathname}),e.conn.clear()})}(),function(){const t=document.querySelector(".cb_expend"),e=(document.querySelector(".cb_attach"),document.querySelector(".cb_specker"),document.querySelector(".cb_cart")),n=(document.querySelector(".mr-cart-count"),document.querySelector(".cb_info")),a=document.querySelector("#message-form"),s=document.querySelector(".cb_message_info"),o=document.querySelector("#cbMessages"),r=document.querySelector(".mr_microphone"),i=document.querySelector(".mr_menus");let c=parseInt(mrAssistantObj.woo);!c&&e&&(e.style.display="none"),r&&(r.style.display="none"),t&&t.addEventListener("click",function(a){a.preventDefault(),c&&e&&(e.style.display="block"),n&&(n.style.display="block"),i&&(i.style.display="block"),t&&(t.style.display="none")}),a&&a.addEventListener("click",function(a){e&&(e.style.display="none"),n&&(n.style.display="none"),t&&(t.style.display="block"),s&&(s.style.display="none"),r&&(r.style.display="none"),i&&(i.style.display="none"),o&&(o.style.display="block")})}(),firebase.auth().onAuthStateChanged(function(t){const n=document.querySelector(".mr_menus"),a=document.querySelector(".cb_bot"),s=(document.querySelector(".cb_specker"),document.querySelector(".cb_cart")),r=(document.querySelector(".mr-cart-count"),document.querySelector(".cb_info"));r&&r.addEventListener("click",i,!0),n&&n.addEventListener("click",o,!0),a&&a.addEventListener("click",function(e){let n=a.dataset.action,s={};const o=document.querySelector(".bot-line");if("pulse"===n?(a.dataset.action="running",a.classList.remove("bot-pulse"),s.status="active",o&&(o.style.display="none")):(a.dataset.action="pulse",a.classList.add("bot-pulse"),s.status="pulse",o&&(o.style.display="inline")),null!=t){let e=firebase.database().ref("clients").child(t.uid);e.child("conversation").child("mr-assistant").update(s),e.child("settings").update(s)}}),r&&r.addEventListener("click",function(t){e.searchEngine.run({api:"master",ks:"all",qs:"help",type:"kb",att:{}})}),s&&s.addEventListener("click",function(t){e.eCommerce.viewCart()})}),document.querySelector(".mr-dropdown-btn").addEventListener("click",function(t){let e=document.querySelector(".mr-dropdown");e.style.display="none"===e.style.display?"":"none"})}function l(){firebase.auth().onAuthStateChanged(function(t){t?t&&t.uid&&(!function(t){if(!t)return;let n=e.common.getUrlPath(),a={};localStorage.getItem("mrCurrentPage")!==n&&(firebase.database().ref("browses").child(t.uid).push({page:n,time:Date.now()}),a.currentPage=n,localStorage.setItem("mrCurrentPage",n)),a.lastSeen=Date.now(),firebase.database().ref("clients").child(t.uid).child("info").update(a)}(t),firebase.database().ref("livechat").child(t.uid).limitToLast(1).on("child_added",function(t){let s=t.val();localStorage.getItem("mrAssistantDom");if("expend"!==e.common.getCookie("mrAssistantDom",{path:document.location.pathname})){let t=document.querySelector(".alc_chatbot");if(t){let e=window.frameElement;if(e.style.width="430px",e.style.height="60vh",!document.querySelector(".tempBox")){let e=document.createElement("DIV");e.setAttribute("class","chat tempBox"),t.appendChild(e)}!function(t){if("admin"===t.type&&Date.now()-t.time<2e3){let e=document.querySelector(".tempBox"),a=document.querySelector(".introMessage");if(a&&a.remove(),e){e.style.display="inline-flex";let a=document.createElement("DIV"),s=document.createElement("DIV");a.setAttribute("class","tempMessages"),s.setAttribute("class","tempMessage theme"),n.appearance&&n.appearance.theme&&s.setAttribute("style","background: "+n.appearance.theme||""),s.innerHTML=t.text,a.appendChild(s),e.prepend(a);let o=document.querySelector(".tempBox");o&&o.scrollIntoView({behavior:"smooth",block:"end"})}}}(s),a=1}}})):firebase.database().ref("settings").child("configuration").on("value",function(t){let n=t.val();"chatWithVisitors"===n.chatWay&&n.chatWithVisitor&&firebase.database().ref("actions").child("onlineVisitors").once("value",function(t){let a=t.val(),s=e.common.timeAgo(a.lastSync,"min"),o=n.chatWithVisitorWay;if(n.offlineTracking||s<=30){let t={name:"Visitor "+e.common.getRandomInt(1e3,9999),email:"",isNewUser:!1,marge:!1,lastSeen:Date.now(),method:o,type:"visitorChat",chatWay:"chatWithVisitor",join:Date.now(),status:"active",currentPage:window.location.href,browser:e.common.getBrowser(),language:navigator.language,platform:navigator.platform};if("anonymousAuth"===o)s<=30&&firebase.auth().signInAnonymously().then(e=>{let n=e.user;n&&(t.guid="",t.uid=n.uid,t.vChat="initialized",firebase.database().ref("visitors").child(n.uid).update(t),firebase.database().ref("clients").child(n.uid).child("info").update(t),firebase.database().ref("actions/onlineVisitors/unSeen").transaction(function(t){return(t||0)+1}))}).catch(function(t){"on"===mrAssistantObj.dev&&console.info(t)});else if("anonymousGuidAuth"===o){let n=e.common.localDB("mrAssistantGUID","get");e.common.jsonParse(n[0]);if(!n[0]||!n[0].guid){let n=e.common.generateGUID(),a="Visitor "+e.common.getRandomInt(1e3,9999);e.common.localDB("mrAssistantGUID","set",{guid:n,visitor:a,join:Date.now()},!0),t.name=a,t.join=Date.now(),t.guid=n,t.uid="",t.status="justJoin",firebase.database().ref("visitors").child(n).once("value",function(t){t.key||firebase.database().ref("actions/onlineVisitors/unSeen").transaction(function(t){return(t||0)+1})}),firebase.database().ref("visitors").child(n).update(t)}let a=e.common.localDB("mrAssistantGUID","get");a[0]&&a[0].guid&&(t.name=a[0].visitor,firebase.database().ref("visitors").child(a[0].guid).update(t),firebase.database().ref("actions").child("visitorSignUp").child(a[0].guid).on("value",function(n){let s=n.val();if(s){let n=e.common.timeAgo(s.lastSync,"min");s.guid===a[0].guid&&n<=2&&firebase.auth().signInAnonymously().then(n=>{let s=n.user;s&&(t.guid=a[0].guid,t.uid=s.uid,t.join=a[0].join||Date.now(),t.method=o,firebase.database().ref("clients").child(s.uid).child("info").update(t).then(function(){e.conn._conversationInit(s)}))}).then(function(){t.vChat="initialized",firebase.database().ref("visitors").child(a[0].guid).update(t)}).then(function(){firebase.database().ref("actions").child("visitorSignUp").child(a[0].guid).remove()}).catch(function(t){"on"===mrAssistantObj.dev&&console.info(t)})}}))}}})})})}function u(){return new Promise(function(t,n){const a=document.querySelector(".alc_chatbot");if(!a)return;if(!document.querySelector(".close-chat")){const t=document.createElement("DIV");t.setAttribute("class","chat"),t.setAttribute("id","alc_chat"),t.innerHTML=e.template.chatTemplate(),a.appendChild(t)}t(c())}).then(function(){let n=new t;if(n.conn&&n.conn.execute(),1===parseInt(mrAssistantObj.woo)){let t=localStorage.getItem("mrAssistantCart");parseInt(t)&&e.eCommerce.setCartTotal(parseInt(t))}localStorage.setItem("mrAssistantDom","expend"),e.common.setCookie("mrAssistantDom","expend",{path:document.location.pathname}),document.body.className=document.body.className.replace("no-js","js")})}return{execute:function(){if(function(){let t=document.getElementById("mr_custom_style");if(e.common.isset(mrAssistantObj)&&t){let n="";mrAssistantObj.hasOwnProperty("chat_bg")&&e.common.isValidURL(mrAssistantObj.chat_bg)&&(n+=`#cbBotMessages{background: transparent url(${mrAssistantObj.chat_bg}) center top no-repeat;background-size: cover;}`),t.innerHTML=n}}(),mrAssistantObj.hasOwnProperty("web_api_key")&&mrAssistantObj.hasOwnProperty("project_id"))if(""!==!mrAssistantObj.web_api_key&&""!==!mrAssistantObj.project_id){if(!firebase.apps.length){let t={apiKey:mrAssistantObj.web_api_key,authDomain:mrAssistantObj.project_id+".firebaseapp.com",databaseURL:"https://"+mrAssistantObj.project_id+".firebaseio.com",storageBucket:mrAssistantObj.project_id+".appspot.com"};firebase.initializeApp(t)}firebase.apps.length&&(n=Object.assign({},mrAssistantObj),firebase.database().ref("settings").once("value",function(t){t.val()&&(function(){let t=document.body;if(["Android","webOS","iPhone","iPad","iPod","BlackBerry","Windows Phone"].some(t=>navigator.userAgent.match(new RegExp(t,"i"))))return t.classList.remove("desktop"),t.classList.add("mobile"),window.frameElement.style.width="100%",!0;t.classList.remove("mobile"),t.classList.add("desktop")}(),(n=Object.assign({},n,t.val())).hasOwnProperty("configuration")&&!n.configuration.assistantSupport||(function(t){let n=['<div class="alc_chatbot"><div class="alc_popup"><div class="alc_pop_box"></div></div></div>'].join("\n"),a=document.createElement("DIV");if(a.setAttribute("class","mr-assistant-container"),a.innerHTML=n,document.body.prepend(a),1===parseInt(mrAssistantObj.woo)){let t=parseInt(mrAssistantObj.wooCart);localStorage.setItem("mrAssistantCart",t.toString()),t>0&&e.eCommerce.setCartTotal(t)}setTimeout(function(t){window.frameElement.style.opacity=1},1e3)}(),function(t){const e=document.getElementById("mr_config_script");let n={};e&&t&&(n.configuration=t.hasOwnProperty("configuration")?t.configuration:{},e.innerHTML="let mrAssets ="+JSON.stringify(n))}(n),firebase.database().ref("translation").child("chatWidget").once("value",function(t){let e=t.val();if(e){const t=document.getElementById("mr_trans_config");t&&(t.innerHTML="let mrTrans ="+JSON.stringify(e))}}).catch(function(t){"on"===mrAssistantObj.dev&&console.info(t)}),function(){const t=document.querySelector(".alc_chatbot");if(!t)return;let a=localStorage.getItem("mrAssistantFlyMeg");if("expend"===localStorage.getItem("mrAssistantDom"))u();else if((!a||"seen"!==a)&&mrAssistantObj.hasOwnProperty("intro")){let a=mrAssistantObj.intro,s=n&&n.hasOwnProperty("name")?n.name:"Mr. Assistant",o=n&&n.hasOwnProperty("avatar")?n.avatar:"",r=mrAssistantObj&&mrAssistantObj.hasOwnProperty("plugin_url")?mrAssistantObj.plugin_url+"assets/images/mr-assistant.svg":"",i=""!==o&&e.common.isValidURL(o)?o:r,c=mrAssistantObj.hasOwnProperty("intro_box_width")?mrAssistantObj.intro_box_width:360;if(""!==a){const n=document.createElement("DIV");n.setAttribute("class","introMessage"),n.setAttribute("style","width: "+c+"px"),n.innerHTML=e.template.flyTemplate(a,s,i),t.appendChild(n);const o=window.frameElement;o.style.width="430px","100vh"!==o.style.height&&(o.style.height="296px");const r=document.querySelector(".message-container");r&&r.addEventListener("click",u);let l=document.querySelector(".close-introMessage");l&&l.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const e=document.querySelector(".introMessage");e&&e.remove(),o.style.width="112px",o.style.height="140px",localStorage.setItem("mrAssistantFlyMeg","seen")});let m=document.querySelector(".intro-start-btn");m&&m.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),u()}),e.translate.execute()}}}()))}).then(function(){const t=document.querySelector(".alc_start");t&&t.addEventListener("click",u,!0),l();const n=document.querySelector(".mr-chat-icon");if(n){const t=mrAssistantObj.chat_icon?mrAssistantObj.chat_icon:"",a=mrAssistantObj.plugin_url+"assets/images/chat-button.svg";let s=Math.floor(92992343*Math.random()+1);n.setAttribute("id","mrImg-"+s),e.common.image(s,t,a,"imgSrc")}}).catch(function(t){"on"===mrAssistantObj.dev&&console.info(t)}))}else"on"===mrAssistantObj.dev&&console.info("Ooops!!! Wrong Configuration.");else"on"===mrAssistantObj.dev&&console.info("Ooops!!! Wrong Configuration.")},settings:n,mrHelpMenuExecute:i,popMessage:function(t={}){e.common.mrLoader(!0);let n=document.createElement("DIV");document.querySelectorAll(".mr-cart-count");const a=document.querySelector("#cbBotMessages");new Promise(function(e,a){n.setAttribute("class","viewCart");let s="",o=t;if(o&&o.hasOwnProperty("content")){s+=`<div class="cart-header theme"><div class="cart-title">${o.title&&""!==o.title?o.title:"Message"}</div>\n                    <span class="close-cart-view">X</span></div>`,s+='<div class="help-content"><p>',s+=o.content&&""!==o.content?o.content:"",s+="</p>";let t=o.button&&""!==o.button?o.button:"",e=o.action&&""!==o.action?o.action:"",n=o.type&&""!==o.type?o.type:"";""!==t&&(s+=`<div class="ex_button theme" data-type="${n}" data-action="${e}">${t||"Click here"}</div>`),s+="</div>"}else s+="<div></div>";n.innerHTML=s,e(1)}).then(function(){const t=document.querySelectorAll(".viewCart");t&&t.forEach(t=>t.remove()),document.querySelector("#cbMessages").append(n),a.querySelectorAll(".mr-loader").forEach(t=>t.style.display="none");let e=document.getElementById("cbMessages");e&&e.scrollIntoView({behavior:"smooth",block:"end"});let s=document.querySelector(".viewCart .close-cart-view"),o=document.querySelector(".viewCart .ex_button");o&&o.addEventListener("click",r,!0),s&&s.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const e=document.querySelectorAll(".viewCart");e&&e.forEach(t=>t.remove())},!0)}).then(function(){let t=document.querySelectorAll(".menu-list .mr-menu-item");t&&t.forEach(t=>t.addEventListener("click",s,!0)),e.common.mrLoader(!1),e.common.typeLoader(!1)})},chatWithVisitor:l,chat_start:u}}(),t.prototype.translate=function(){return{execute:function(){if(!firebase.auth().currentUser)return;const t=document.querySelectorAll(".mrtx");t&&firebase.database().ref("translation").child("chatWidget").once("value",function(e){let n=e.val()||{};if(n||!n){const e=document.getElementById("mr_trans_config");e&&(e.innerHTML="let mrTrans ="+JSON.stringify(n)),t.forEach(function(t){const e=t.innerText,a=t.dataset.key;if(n.hasOwnProperty(a)&&n[a].hasOwnProperty("tx1")&&""!==n[a].tx1)t.innerText=n[a].hasOwnProperty("tx2")&&""!==n[a].tx2?n[a].tx2:e;else{let t={tx1:e,tx2:e};firebase.database().ref("translation").child("chatWidget").child(a).update(t)}})}}).catch(function(t){"on"===mrAssistantObj.dev&&console.info(t)})},get:function(t,e){if(mrTrans){if(e&&mrTrans.hasOwnProperty(e)&&mrTrans[e].hasOwnProperty("tx1")&&""!==mrTrans[e].tx1)return mrTrans[e].hasOwnProperty("tx2")&&""!==mrTrans[e].tx2?mrTrans[e].tx2:t;if(firebase.auth().currentUser){let n={tx1:t,tx2:t};firebase.database().ref("translation").child("chatWidget").child(e).update(n)}}return t}}}(),t.prototype.carousel=function(){return{execute:function(){var t=document.querySelectorAll(".mr_carousel");[].forEach.call(t,function(t){!function(t){var e=t.querySelector(".mr_items"),n=300,a=0,s=t.querySelectorAll(".mr_items li"),o=0,r=t.querySelector(".mr_c_prev"),i=t.querySelector(".mr_c_next");function c(){e.style.transform="translateX(-"+300*a+"px)"}[].forEach.call(s,function(t){o++,n+=300,e.style.width=n+"px"}),i.onclick=function(){a<o-1&&(a++,c())},r.onclick=function(){a>0&&(a--,c())}}(t)})}}}(),t.prototype.eCommerce=function(){function t(t){if(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),0===parseInt(mrAssistantObj.woo))return;let n=t.target.dataset.pid,a=t.target.dataset.stock;if(a&&"outOfStock"===a)return e.conn.notification(e.translate.get("Sorry!! This item is out of stock.","_txcwecac4")),void e.searchEngine.saveMessage(e.translate.get("Sorry!! This item is out of stock.","_txcwecac5"),"bot","mr");if(t.target.classList.contains("mr_view_cart"))return;t.target.classList.remove("s-buy-plus"),t.target.innerHTML=e.template.loader();let s=new URL(mrAssistantObj.domain);s.searchParams.set("post_type","product"),s.searchParams.set("add-to-cart",n),axios.get(s).then(n=>{if(n.data){document.querySelectorAll(".mr-cart-count").forEach(t=>{t.style.display="block";let e=(parseInt(t.innerText)?parseInt(t.innerText):0)+1;t.innerText=e,localStorage.setItem("mrAssistantCart",e.toString())}),e.conn.notification(e.translate.get("Success!! Item has added to Shopping Cart.","_txcwecac1")),e.searchEngine.saveMessage(e.translate.get("Item has added to Shopping Cart.","_txcwecac2"),"bot","mr");const n=document.getElementById("addToCart");n&&(n.innerHTML=`<div class="mr-add-to-cart theme"><a target="_blank" href="${mrAssistantObj.wooCartURL}"><span class="iconify" data-icon="bi:cart-check"></span>  VIEW CART</a></div>`),t.target.classList.add("s-buy-plus"),t.target.classList.add("mr_view_cart")}})}return{onAddToCart:t,view_details:function(n){n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),e.conn.notification("Executing your Details View request.");let a=n.target.dataset.pid;const s=document.querySelector(".alc_pop_box");let o=document.querySelector(".introMessage");o&&o.remove();let r=window.frameElement;r.style.width="100%",r.style.height="100vh";let i={};return i.id=a,s.innerHTML=e.common.loaderText(),axios({url:mrAssistantObj.plugin_url+"mr-postman.php",data:{action:"mr_get_posts",mr_api:"mr_view_post",requestData:JSON.stringify(i)},method:"POST",type:"JSON",withCredentials:!0,token:"show "+Date.now()+" cart",timeout:3e4,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>{let n=t.data;if("ok"===n.data.status)try{let t=n.data.data;if(!t.ID){s.innerHTML="",r.style.width="430px",r.style.height="100vh";const t=mrAssistantObj.domain+"?p="+a;return void window.open(t,"_blank").focus()}{t.ID;let n=t.post_type;s.innerHTML=e.template.singleView(n,t)}}catch(t){const n=mrAssistantObj.domain+"?p="+a;e.init.popMessage({title:e.translate.get("Open This Page","_txcwepop1"),content:e.translate.get("Pop-ups were Blocked on this page!! Please Click on view now button to open this.","_txcwepop2"),type:"redirect",button:e.translate.get("View Now","_txcwepop3"),action:n}),"on"===mrAssistantObj.dev&&console.info(t)}}).then(function(){let e=document.querySelector(".close_btn"),n=document.querySelectorAll(".mr-add-to-cart");n&&n.forEach(e=>{e.addEventListener("click",t,!0)}),e&&e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),s.innerHTML="",r.style.width="430px",r.style.height="100vh"},!0)})},viewCart:function(){e.common.mrLoader(!0);let t=document.createElement("DIV");const n=document.querySelectorAll(".mr-cart-count"),a=document.querySelector("#cbBotMessages");{t.setAttribute("class","viewCart");let s="";return axios({url:mrAssistantObj.plugin_url+"mr-postman.php",data:{action:"mr_cart_contents"},method:"POST",type:"JSON",withCredentials:!0,token:"show "+Date.now()+" cart",timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>{let a=t.data;a.cart_total&&n&&n.forEach(t=>t.innerText=a.cart_total),e.conn.notification("Here are your Shopping Cart.");let o=['<div class="cart-header theme">',`<div class="cart-title">${e.translate.get("My Shopping Cart","_txcwwo1")}</div>`,'<span class="close-cart-view">X</span></div>'].join("");if(s+=o,a.cart_contents.length>0){let t="";a.cart_contents.forEach(e=>{t+=['<li class="vc-row">',`<span>${e.image}</span>`,`<span class="vc-title">${e.title}</span>`,`<span>${e.quantity}</span>`,`<span>${e.item_total}</span>`,"</li>"].join("")}),s+='<ul class="vc_cart"><li class="vc-head"><span> </span><span>Products</span><span> Qty</span><span>Price</span></li>',s+=t,s+=`<li class="vc-footer"><span>Sub Total</span><span>${a.subtotal}</span></li>`,s+=`<li class="vc-footer"><span>Shipping Cost</span><span>${a.shipping_cost}</span></li>`,s+=`<li class="vc-footer"><span>Total</span><span>${a.total}</span></li>`,s+="</ul>",s+=`<a href="${mrAssistantObj.wooCheckOutURL||mrAssistantObj.domain+"/checkout"}" target="_blank" class="checkoutBtn theme">${e.translate.get("Check Out","_txcwwo2")}</a>`}else s+=`<div>${e.translate.get("No Iten Found","_txcwwo3")}</div>`}).then(()=>{a.querySelectorAll(".mr-loader").forEach(t=>t.style.display="none")}).then(function(){t.innerHTML=s;const n=document.querySelectorAll(".viewCart");n&&n.forEach(t=>t.remove()),document.querySelector("#cbMessages").append(t),e.common.mrLoader(!1);let a=document.querySelector(".viewCart .close-cart-view");a&&a.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const e=document.querySelectorAll(".viewCart");e&&e.forEach(t=>t.remove())},!0),e.common.typeLoader(!1)})}},setCartTotal:function(t){const e=document.querySelectorAll(".mr-cart-count");e&&t>0?e.forEach(e=>{e.style.display="block",e.innerText=t}):e&&e.forEach(t=>t.style.display="none")}}}(),t.prototype.searchEngine=function(){let t,n,a,s={},o=0,r=0,i=1e3,c="",l=0,u="search";function m(){return firebase.auth().currentUser&&firebase.auth().currentUser.uid}function d(t){let e=Object.values(t);return e&&e.length>0?e[Math.floor(Math.random()*e.length)]:""}function p(n,a,s,o){e.common.getCookie("mrRobotSession");if(o!==t)return;if("kb"===n)v(a,"bot",s);else if("rel"===n){e.common.typeLoader(!0);let t=document.querySelectorAll(".mr-tags");t&&t.forEach(t=>t.remove());let n=document.createElement("DIV");n.setAttribute("class","mr-tags");a.forEach(function(t){let e=document.createElement("SPAN");e.setAttribute("class","tag fade theme"),e.setAttribute("data-key",t.key),e.innerText=t.val,e.addEventListener("click",g,!0),n.appendChild(e)});const s=document.getElementById("cbMessages");e.common.playSound("au-message"),e.common.typeLoader(!1),s&&s.appendChild(n)}const r=document.getElementById("cbMessages");r&&r.scrollIntoView({behavior:"smooth",block:"end"})}function f(t,n){try{let a=new URL(t);e.init.popMessage({title:e.translate.get("Page Suggestion","_txcwpm1"),content:e.translate.get("Click this button to open this page.","_txcwpm2")+"<p>"+t+"</p>",type:"redirect",button:e.translate.get("Open Page","_txcwpm3"),action:t});let s=window.open(a,"_blank");if(s&&!s.closed&&void 0!==s.closed)return s.focus();e.conn.notification(e.translate.get("Pop-up Blocked. Click this button to open this page.","_txcwrn1"))}catch(t){firebase.database().ref("training").push({uid:m(),time:Date.now(),type:"URL",sts:1,qs:"KB action fail. KB: "+n})}}function h(n){if(c===n.key)return l>4&&v(function(){let t=["Just splendid, thanks","Not too shabby at all, thanks","I guess you could say i feel wired all the time. Let me know how I can help!"];return t[Math.floor(Math.random()*t.length)]}(),"bot",t),l+=1,"";if(l=0,u="search",c=n.key,n.hasOwnProperty("ans")&&""!==n.ans||e.common.typeLoader(!1),"search"===n.type)e.controller.bot(n.act,{cuAction:1,kbAction:0,sbAction:1,allow:1});else if("kb"===n.type)u="all_KB",e.controller.bot(n.act,{cuAction:0,kbAction:1});else if("redirect"===n.type)n.act&&f(n.act,n.que);else if("update_cart"===n.type)1===parseInt(mrAssistantObj.woo)&&mrAssistantObj.wooCartURL&&f(mrAssistantObj.wooCartURL,n.que);else if("checkout"===n.type)1===parseInt(mrAssistantObj.woo)&&mrAssistantObj.wooCheckOutURL&&f(mrAssistantObj.wooCheckOutURL,n.que);else if("help"===n.type){const t=document.querySelector(".cb_info");t&&t.click()}else if("menu"===n.type){const t=document.querySelector(".mr_menus");t&&t.click()}else if("cart"===n.type){const t=document.querySelector(".cb_cart");t&&t.click()}else"rate"===n.type&&e.form.feedbackForm("feedback");return""}function g(n){n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation();let a=n.target.innerText,s=n.target.dataset.key;v(a,"client",t);let o=e.common.generateGUID();e.common.setCookie("mrRobotAutoAction",0,5),e.common.setCookie("mrRobotSession",o,5),firebase.database().ref("knowledgeBase").child(s).once("value",function(t){let e=t.val();e&&h(e)})}function b(n,a){(async()=>{if(a!==t)return;let o=await async function(e,n){if(n!==t)return[];let a,s=elasticlunr(function(t){t.addField("que"),t.addField("tag"),t.setRef("key")});elasticlunr.clearStopWords=function(){elasticlunr.stopWordFilter.stopWords={}},elasticlunr.clearStopWords(),elasticlunr.addStopWords=function(t){null!=t&&!1!==Array.isArray(t)&&t.forEach(function(t){elasticlunr.stopWordFilter.stopWords[t]=!0},this)};const o=u;let i=await firebase.database().ref("knowledgeBase").orderByKey();return await i.once("value").then(function(t){let n=t.val();return n?(r=Object.keys(n).length,t.forEach(function(t){t.key;let e=t.val();e.hasOwnProperty("status")&&parseInt(e.status)>0&&("all_KB"===o?s.addDoc(e):"2"===e.status&&s.addDoc(e))}),a=s.search(e,{fields:{que:{boost:4},tag:{boost:3}}})):[]})}(n.qs,a);if(u="search",void 0!==typeof o&&o.length>0){let t=1200;i=1e3;let r=3;if(mrAssets&&mrAssets.hasOwnProperty("configuration")){let t=mrAssets.configuration;if(t&&t.hasOwnProperty("sb_power")){let e=parseFloat(t.sb_power);r=e>0?e:0}}if(o[0].score<=r&&s.sbAction)return y(n,a);let c=o[0].doc.ans?o[0].doc.ans:{};if(c&&c.constructor===Object&&Object.keys(c).length>0&&(p("kb",d(Object.values(o[0].doc.ans)[0]),"mr",a),i+=1e3),c&&c.constructor===Object&&Object.keys(c).length>1){let s=Object.assign({},Object.values(c).slice(1)),r=Object.keys(s).pop();Object.keys(s).forEach(function(c){let l=s[c];if(setTimeout(()=>{p("kb",d(l),"ma",a)},i+t*Math.random()),i+=1e3,c===r){let s=o[0].doc.rel;if(s&&s.length>0&&(setTimeout(()=>{p("rel",s,"ma",a)},i+t*Math.random()),i+=1e3),"kb"!==n.type&&""!==o[0].doc.type)try{let n=e.common.getCookie("mrRobotAutoAction"),a=parseInt(n)>0?parseInt(n):0;e.common.setCookie("mrRobotAutoAction",a+1,5),a<3?(setTimeout(()=>{h(o[0].doc)},i+t*Math.random()),i+=1e3):e.common.setCookie("mrRobotAutoAction",0,5)}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}}})}else{let n=o[0].doc.rel;if(n&&n.length>0&&(setTimeout(()=>{p("rel",n,"ma",a)},i+t*Math.random()),i+=1e3),""!==o[0].doc.act)try{let t=e.common.getCookie("mrRobotAutoAction"),n=parseInt(t)>0?parseInt(t):0;if(e.common.setCookie("mrRobotAutoAction",n+1,5),n<3)return i+=1e3,h(o[0].doc);e.common.setCookie("mrRobotAutoAction",0,5)}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}}}else s.sbAction&&y(n,a)})()}function y(s,r){if(e.common.mrLoader(!0),r!==t)return;"go"===(s=Object.assign({},s,{qs:e.common.sanitize(s.qs,!0)})).qs.trim().split(" ").splice(-1)[0].toLowerCase()&&(s.ks="navigator",s.qs=s.qs.trim().replace(/\w+[.!?]?$/,"")),s.accessToken=r;let i=(s.ks+s.qs).trim();n=i,a=performance.now();let c={url:mrAssistantObj.plugin_url+"mr-postman.php",data:{action:"mr_professor",mr_api:s.api||"master",requestData:JSON.stringify(s)},method:"POST",timeout:3e4,type:"JSON",headers:{Accept:"application/json","Content-Type":"application/json"}};return axios(c).then(function(n){let a=n.data;if(!a)return e.controller.bot("_notFound",{cuAction:0,kbAction:1,sbAction:0,botAction:"all_KB"});let r=n.data.data.data,i=n.data.cryptography,c=a.accessToken;if(t===c)if("tags"===i.api&&""===i.ks)r&&Object.keys(r).length>0?(v(e.translate.get("Here have some categories.","_txcwtag1"),"bot",t),v(r,"tags",t)):v(e.translate.get("Sorry! no category found.","_txcwtag1"),"bot",t);else{if("navigator"===s.ks)try{if(r[0]){let n=mrAssistantObj.domain.replace(/\/$/,"")+"?p=";e.conn.notification(e.translate.get("Opening your requested page.","_txcwrd1")),v(e.translate.get("Opening your requested page: ","_txcwrd1")+r[0].post_title,"bot",t);let a=new URL(n+r[0].id),s=window.open(a,"_blank");return e.init.popMessage({title:e.translate.get("Page Suggestion","_txcwpm1"),content:e.translate.get("Click this button to open this page.","_txcwpm2"),type:"redirect",button:e.translate.get("Open Page","_txcwpm3"),action:n+r[0].id}),s&&!s.closed&&void 0!==s.closed?s.focus():void 0}return e.conn.notification(e.translate.get("Didn't find object to to open. Try again!!","_txcwrd2")),v(e.translate.get("Didn't find object to to open. Try again!!","_txcwrd2"),"bot",t)}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}function l(n,a){let s=a>1?"s":"",o=a>1?"theses ":"this ",r=a>1?"some ":"the ",i=[e.translate.get("Here's what I found","_txcwrs1"),"Check out "+o+n+s,"Here's "+r+n+s,"Here's "+r+"result"+s],c=[e.translate.get("Sorry, I didn't find anything","_txcwrs3"),e.translate.get("Nothing found","_txcwrs4"),e.translate.get("No result found","_txcwrs5")];v(a>0?i[Math.floor(Math.random()*i.length)]:c[Math.floor(Math.random()*c.length)],"bot",t)}r.length>0?(o=0,l(r[0].post_type,r.length)):(o<1&&mrAssets.configuration.hasOwnProperty("notFound")&&"custom"===mrAssets.configuration.notFound?(o+=1,e.controller.bot("_notFound",{cuAction:0,kbAction:1,sbAction:0,botAction:"all_KB"})):l("null",0),e.conn.notification("Need Help!! Type help or menu"),firebase.database().ref("training").push({uid:m(),time:Date.now(),type:"notFound",status:1,qs:s.qs})),v(r,"slider",t)}}).then(function(){return document.getElementById("cbMessages").scrollIntoView({behavior:"smooth",block:"end"}),e.common.mrLoader(!1),!0}).catch(function(t){"on"===mrAssistantObj.dev&&console.info(t)})}function v(t,n,a=""){if(""===a)return;let s=firebase.auth().currentUser,o={};if(o.type=n,o.time=Date.now(),o.text=t,"bot"===n?o.text=t:"slider"===n?o.data=function(t){return t.reduce(function(t,e){if(e.post_content){let n=e.post_content.replace(/<\/?[^>]+(>|$)/g,"").replace(/\[.*?\]/g,"").replace(/(\r\n|\n|\r)/gm," ").split(" ").filter(t=>t).join(" "),a=n.length>150?n.substring(0,150):n;e.post_content=a.trim(),t.push(e)}else t.push(e);return t},[])}(t):"tags"===n&&(o.data=t),s){let t=s.uid||null;e.conn.chatUsers&&("client"===n?o.name=e.conn.chatUsers.clientName||"Anonymous":"bot"===n&&(o.name=mrAssistantObj.name||"Mr. Assistant")),firebase.database().ref("livechat").child(t).push(o)}else e.common.localDB("mrAssistantOfflineChat","set",o),e.template.templateDark("offline-"+Math.floor(Math.random()*Math.floor(Date.now())),o,"message-visitor")}function w(n,a){s=Object.assign({},a);try{t=e.common.getCookie("mrRobotSession");let s=["master","products","posts","pages","tags","author"];"master"===n.api?a.kbAction?(a.hasOwnProperty("botAction")&&"all_KB"===a.botAction&&(u="all_KB"),b(n,t)):a.sbAction&&y(n,t):"-1"!==s.indexOf(n.api)&&y(n,t)}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}return 0}return{run:w,menuAction:function(e,n){return y({api:"master",ks:"all",qs:e,att:{}},t="mrAssistant")},tagManagerEvent:function(n){n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation();let a=n.target.dataset.name,o=n.target.dataset.slug;n.target.dataset.id,v(a,"client",t);let r=e.common.generateGUID();return e.common.setCookie("mrRobotAutoAction",0,5),e.common.setCookie("mrRobotSession",r,5),w({api:"tags",ks:e.common.sanitize(o),qs:"",att:{}},s)},saveMessage:v}}(),t.prototype.controller=function(){let t={};const n={symAuthor:["@"],symPro:["$"],symRe:["/"],symTag:["#"],product1:["product","products","shop"],post1:["post","posts","blog"],page1:["page","pages"],tag1:["tag","tags","cat","category"]};let a=Object.assign({},n,{symbols:Array.from(new Set(n.symPro.concat(n.symTag,n.symAuthor,n.symRe))),action:Array.from(new Set(n.product1.concat(n.post1,n.page1,n.tag1)))});function s(n,s){let o=s.substr(s.indexOf(" ")+1).trim();if(o=n!==s?o:"",-1!==a.product1.indexOf(n)&&(t.a_product||t.allow))return e.searchEngine.run({api:"products",ks:"all",qs:o,att:{}},t);if(-1!==a.post1.indexOf(n)&&(t.a_post||t.allow))return e.searchEngine.run({api:"posts",ks:"all",qs:o,att:{}},t);if(-1!==a.tag1.indexOf(n)&&(t.a_tag||t.allow)){let n=e.common.split(o);return e.searchEngine.run({api:"tags",ks:n[0],qs:n[1],att:{}},t)}return-1!==a.page1.indexOf(n)&&(t.a_page||t.allow)?e.searchEngine.run({api:"pages",ks:"all",qs:o,att:{}},t):void 0}function o(n){n.substr(0,1);let o=n.replace(/ .*/,"").replace(/[^a-zA-Z]+/g,"");return-1!==a.symbols.indexOf(n.substr(0,1))?(function(n,o){let r=o.substr(1).trim();if(-1!==a.symPro.indexOf(n)&&t.a_product)return e.searchEngine.run({api:"products",ks:"all",qs:r,att:{}},t);if(-1!==a.symTag.indexOf(n)&&t.a_tag){let n=r.replace(/ .*/,"").replace(/[^a-zA-Z]+/g,"");if(-1===a.action.indexOf(n)){let n=e.common.split(r);return e.searchEngine.run({api:"tags",ks:n[0],qs:n[1],att:{}},t)}s(n,r)}else{if(-1!==a.symAuthor.indexOf(n)&&t.a_author){let n=e.common.split(r);return e.searchEngine.run({api:"author",ks:n[0],qs:n[1],att:{}},t)}if(-1!==a.symRe.indexOf(n))e.searchEngine.run({api:"master",ks:"navigator",qs:r,att:{}},t)}}(n.substr(0,1),n),!0):-1!==a.action.indexOf(o)?(s(o,n),!0):function(n){if(6>n.split(" ").length){const a=["category","categories","cat","tag","tags"];if(e.common.mrSearch([a],n))return mrAssistantObj.woo&&e.common.mrSearch([["product","products","shop","store"],a],n)?e.searchEngine.run({api:"tags",ks:"",qs:"",tax:"product_cat",att:{}},t):e.searchEngine.run({api:"tags",ks:"",qs:"",tax:"category",att:{}},t)}return e.searchEngine.run({api:"master",ks:"all",qs:n,att:{}},t)}(n)}return{bot:function(n,a){return(t=Object.assign({},a)).cuAction?o(n):e.searchEngine.run({api:"master",ks:"all",qs:n,att:{}},t)},mrCommandLine:function(t){"-mr allow adminchat"===t.toLowerCase()&&localStorage.setItem("mrAssistantChatItself",!1)}}}(),t.prototype.template=function(){let t={};function n(t="",e="",n=!0){return'<span class="mrtx" data-key="'+e+'" data-mode="'+n+'">'+t+"</span>"}function a(t,n,a,s){const o=document.createElement("DIV"),r=document.createElement("DIV");r.setAttribute("class","meg-wrapper"),o.setAttribute("class","message fade "+(""!==n.type?n.type:"bot")),o.setAttribute("id","mr"+t);const i=document.createElement("span");i.setAttribute("class","message-content"),i.appendChild(document.createTextNode(n.text));let c=`<p class="user">${n.name&&""!==n.name?n.name:function(t,n){if(("admin"===t||"client"===t)&&e.common.isset(mrUsers)&&mrUsers.hasOwnProperty(n)){let t=mrUsers[n];return t&&t.hasOwnProperty("name")?t.name:"Anonymous"}return mrAssistantObj&&mrAssistantObj.hasOwnProperty("name")?mrAssistantObj.name:"Mr. Assistant"}(n.type,n.uid||"")}</p>`,l="client"===n.type?"theme":"";if(r.innerHTML=c+'<span class="message-content '+l+'">'+n.text+"</span>","bot"!==n.type){const t=document.createElement("div");t.setAttribute("class","time"),t.appendChild(document.createTextNode(e.common.getDateTime(n.time))),o&&r.appendChild(t)}o.append(r);let u=document.createElement("DIV"),m=document.createElement("IMG");m.width=25,m.height=25;let d=Math.floor(92992343*Math.random()+1);u.setAttribute("class","avatar-wrapper"),m.setAttribute("class","avatar"),m.setAttribute("id","mrImg-"+d);let p=mrAssistantObj.plugin_url+"assets/images/mr-assistant.svg",f="";"bot"===n.type?(f=mrAssistantObj.hasOwnProperty("avatar")?mrAssistantObj.avatar:"",m.src=""!==f&&e.common.isValidURL(f)?f:p,o&&(u.append(m),o.prepend(u))):"admin"===n.type&&(f=n.hasOwnProperty("avatar")&&e.common.isValidURL(n.avatar)?n.avatar:function(t){let n=mrAssistantObj.plugin_url+"assets/images/boy.svg";if(""!==t&&e.common.isset(mrUsers)&&mrUsers.hasOwnProperty(t)){let e=mrUsers[t];if(e.hasOwnProperty("avatar")&&""!==e.avatar)return e.avatar}return n}(n.uid||""),p=mrAssistantObj.plugin_url+"assets/images/boy.svg",m.src=f,o&&(u.append(m),o.prepend(u)));let h=document.getElementById("cbMessages");if(h){if("prepend"===s){h.prepend(o);let t=document.getElementById("cbMessages");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}else{h.appendChild(o);let t=document.getElementById("cbMessages");t&&t.scrollIntoView({behavior:"smooth",block:"end"})}e.common.image(d,f,p,"imgSrc"),e.common.typeLoader(!1)}}function s(t,n="message-operator",a="",s=""){var o=document.createElement("DIV");o.setAttribute("class","message "+n),o.innerHTML='<span class="message-content">'+t+"</span>",document.getElementById("cbMessages").appendChild(o),document.getElementById("cbMessages").scrollIntoView({behavior:"smooth",block:"end"}),e.common.typeLoader(!1)}function o(n,a,s,o){try{if(t=Object.assign({},s),void 0===a||0==a.length)return;return new Promise(function(s,r){s(function(n,a,s){try{let l=mrAssistantObj.hasOwnProperty("tmImage")?mrAssistantObj.tmImage:"on",u=mrAssistantObj.hasOwnProperty("tmTitle")?mrAssistantObj.tmTitle:"on",m=mrAssistantObj.hasOwnProperty("tmContent")?mrAssistantObj.tmContent:"on",d=mrAssistantObj.hasOwnProperty("tmActions")?mrAssistantObj.tmActions:"on",p=mrAssistantObj.hasOwnProperty("tmBg")?mrAssistantObj.tmBg:"",f=mrAssistantObj.hasOwnProperty("tmFont")?mrAssistantObj.tmFont:"";const h=document.getElementById("cbMessages");var o=document.getElementById("mr"+n);if(!h||o)return"";let g=document.createElement("DIV");g.setAttribute("id","mr"+n),g.setAttribute("class","carousel mr-ani-tb"),g.innerHTML=' <div class="mr-load carousel-loader"><span></span><span></span><span></span><span></span></div>',"prepend"===s?h.prepend(g):h.appendChild(g),Object.values(a),mrAssistantObj.domain;var r=mrAssistantObj.domain+"/wp-content/uploads/",i=mrAssistantObj.upload_dir?mrAssistantObj.upload_dir+"/":r,c=mrAssistantObj.plugin_url+"assets/images/default.svg";let b=function(t,n,a,s){let o=Math.floor(92992343*Math.random()+1);if("off"!==l){document.createElement("div");var r=a?i+a:c;return e.common.image(o,r,c,"img"),['<div class="product-img" data-action="asyncImg">','<span class="mr-img-'+t+'" id="mrImg-'+o+'"><img src="'+r+'"/></span>','<div class="cb-img-hover">','<div class="cb-img-overflow">','<a href="#" class="cb-view-btn cb_view_details theme" data-type="'+s+'" data-pid="'+t+'">View Details</a>',"</div>","</div>","</div>"].join("")}},y=function(t,e,n,a){let s=e.length>60?e.substring(0,60)+"...":e,o=n.replace(/<\/?[^>]+(>|$)/g,""),r=o.length>140?o.substring(0,140)+"...":o;return["off"!==u?'<h4 class="s-title"><a target="_blank" title="'+e+'" href="'+mrAssistantObj.domain.replace(/\/$/,"")+"?p="+t+'" style="color: '+f+'">'+s+"</a></h4>":"","off"!==m?'<p class="s-text"  style="color: '+f+'">'+r+"</p>":""].join("\n")},v=function(e,n,a,s){if("off"===d)return;let o=parseInt(n),r=parseInt(a),i=o&&o>0?o:0,c=r&&r>0?r:0,l=t.woo_currency+i;return i>0&&i===c?l=t.woo_currency+i:c>0&&i!==c&&(l=t.woo_currency+i+" - "+t.woo_currency+c),t.wooBot&&"product"===s?['<div class="cb-s-footer">','<div class="e-footer theme">','<div class="s-price"><span class="mr_price">'+l+"</span></div>",t.wooCart?'<div class="s-buy cb_view_details" data-type="'+s+'" data-pid="'+e+'">View Details</div>':"",t.wooCart?'<div class="s-buy mr-buy-now" data-action="buy" data-pid="'+e+'"><a href="'+mrAssistantObj.domain+"?p="+e+'" target="_blank">Buy Now</a></div>':"","</div></div>"].join(""):['<div class="cb-s-footer">','<div class="mr-footer-center theme">','<div class="s-buy cb_view_details" data-type="'+s+'" data-pid="'+e+'">View Details</div>',"</div></div>"].join("")};return[`<div class="mr_carousel" ${function(){let t=0;return"on"===l&&(t+=140),"on"===u&&(t+=90),"on"===m&&(t+=80),"on"===d&&(t+=60),`style="height: ${t}px"`}()}>`,'<span class="c_btn mr_c_prev theme"><span class="iconify" data-icon="mdi-light:chevron-double-left"></span></span>','<span class="c_btn mr_c_next theme"><span class="iconify" data-icon="mdi-light:chevron-double-right"></span></span>','<ul class="mr_items"">',a.map(t=>[`<li data-action="mr_carousel_item" data-type="${t.post_type}" style="background: ${p}">`,b(t.id,t.post_title,t.attachment,t.post_type),y(t.id,t.post_title,t.post_content,t.post_type),v(t.id,t.price,t.price_max,t.post_type),"</li>"].join("")).join(""),"</ul>","</div>"].join("")}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}}(n,a,o))}).then(function(t){let e=document.querySelector("#cbMessages #mr"+n);e&&(e.innerHTML="",e.innerHTML+=t)}).then(function(){e.carousel.execute();let t="prepend"===o?"start":"end",n=document.getElementById("cbMessages");n&&n.scrollIntoView({behavior:"smooth",block:t})}).then(function(){var t=document.querySelectorAll(".cb_view_details");t&&t.forEach(t=>{t.addEventListener("click",e.eCommerce.view_details,!0)}),e.common.typeLoader(!1)})}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}}return{loader:function(){return['<div class="mr-load">',"<span></span>","<span></span>","<span></span>","<span></span>","</div>"].join("")},set:o,setMeg:s,setAvatar:function(t,n){let a="",s="",o=0,r=mrAssistantObj.plugin_url+"assets",i=r+"/images/boy.svg",c=r+"/images/mr-assistant.svg",l=mrAssistantObj.hasOwnProperty("avatar")?mrAssistantObj.avatar:c,u=e.translate.get("Mr. Assistant","_txcwh8");for(let t in n)if(n.hasOwnProperty(t)){let r=n[t],m=Math.floor(8299432343*Math.random()+84);if(r.avatar&&r.avatar,"mr-assistant"===t&&"active"===r.status){o++,a+=(mrAssistantObj.name||u).split(/(\s).+\s/).join("")+", ";try{(new Image).src=l,s+='<div class="mr-avatar theme" id="mrImg-'+m+'"><img width="45" src="'+l+'"/></div>'}catch(t){s+='<div class="mr-avatar theme" id="mrImg-'+m+'"><img width="45" src="'+c+'"/></div>'}e.common.image(m,l,c,"img",45)}else if("person"===r.type&&"active"===r.status){o++,a+=r.name||", ";let t=r.hasOwnProperty("avatar")&&e.common.isValidURL(r.avatar)?r.avatar:i;try{(new Image).src=t,s+='<div class="mr-avatar theme" id="mrImg-'+m+'"><img width="45" src="'+t+'"/></div>'}catch(t){s+='<div class="mr-avatar theme" id="mrImg-'+m+'"><img width="45" src="'+i+'"/></div>'}e.common.image(m,t,i,"img",45)}}let m=e.translate.get("Chat With","_txcwh1");if(0===o){m=e.translate.get("Chat With","_txcwh6"),a=u,n.hasOwnProperty("mr-assistant")&&n["mr-assistant"].status&&"pulse"===n["mr-assistant"].status&&(m=e.translate.get("Hello there!","_txcwh9"),a=e.translate.get("I'm Mr. Assistant","_txcwh10"));let t=Math.floor(8294322343*Math.random()+44);s='<div class="mr-avatar theme" id="mrImg-'+t+'"><img width="45" src="'+l+'"/></div>',e.common.image(t,l,c,"img",45),o=1}let d=a.replace(/,(\s+)?$/,"");return['<div class="mr-avatars mr-ava-'+o+'">'+s+"</div >",'<h2 class="mr-live-person " title="'+d+'"><span class="mr-chat-with">'+m+"</span>"+d+"</h2>"].join("\n")},adminMeg:o,templateDark:function(t,n,s,r="append",i){let c=document.getElementById("client_id");return c&&c.value!==i?"":document.getElementById("mr"+t)?void 0:"slider"===n.type?o(t,n.data,s,r):"tags"===n.type?function(t,n,a,s){const o=document.getElementById("cbMessages");var r=document.getElementById("mr"+t);if(!o||r)return"";let i=document.createElement("DIV");i.setAttribute("id","mr"+t),i.setAttribute("class","mr-categories"),n instanceof Object&&Object.keys(n).length>0&&Object.keys(n).forEach(function(t){let a=n[t];const s=document.createElement("DIV");s.setAttribute("class","tag fade theme"),s.setAttribute("data-id",t),s.setAttribute("data-name",a.name),s.setAttribute("data-slug",a.slug),s.addEventListener("click",e.searchEngine.tagManagerEvent,!0),s.innerText=a.name,i.append(s)}),"prepend"===s?o.prepend(i):o.appendChild(i);let c="prepend"===s?"start":"end",l=document.getElementById("cbMessages");l&&l.scrollIntoView({behavior:"smooth",block:c}),e.common.typeLoader(!1)}(t,n.data,0,r):a(t,n,0,r)},kno:function(t){return(async()=>await new Promise(e=>{e(s(t[0].doc.answer))}).then(function(){null!==firebase.auth().currentUser&&e.common.saveLocalStroage(firebase.auth().currentUser.uid,"cbMessages")}))()},flyTemplate:function(t,e="Mr. Assistant",a=""){return['<div class="close-introMessage">','<button type="button">','<span class="iconify" data-icon="ion:close"></span>',"</button>","</div>",'<div class="intro-container">','<img src="'+a+'" alt="'+e+'" class="avatar i-avatar">','<div style="margin-right: 20px;"><div class="i-avatar-name">'+e+'</div><div class="message-container">'+t+"</div>",'<div class="intro-start-btn theme"><span class="iconify" data-icon="bx:bxs-chat" data-inline="true"></span><span>&nbsp;&nbsp;'+n("Start Live Chat","_txcwi1")+"</span></div>","</div>","</div>"].join("\n")},chatTemplate:function(){const t=mrAssistantObj.plugin_url+"assets/images/mr-assistant.svg";let a=Math.floor(92992343*Math.random()+1),s=t;mrAssistantObj.hasOwnProperty("menu_avatar")&&e.common.isValidURL(mrAssistantObj.menu_avatar)&&(s=mrAssistantObj.menu_avatar),e.common.image(a,s,t,"imgSrc");let o="Search & Message...";return mrAssistantObj.hasOwnProperty("placeholder")&&""!==mrAssistantObj.placeholder&&(o=mrAssistantObj.placeholder),['<div class="chat-header theme">','<div class="mr-left-header">','<div class="mr-avatars">','<div class="mr-avatar theme"><img width="45" src="'+t+'"/></div>',"</div>",'<h2 class="mr-live-person "><span class="mr-chat-with">'+n("Chat with","_txcwh1")+" </span>Mr. Assistant</h2>","</div>",'<button class="close-chat material-icons" type="button">','<span class="iconify" data-icon="ion:close"></span>',"</button>",'<button class="mr-dropdown-btn material-icons" type="button">','<span class="iconify" data-icon="bx:bx-dots-vertical-rounded" data-inline="true"></span>',"</button>",'<div class="mr-dropdown theme" style="display: none"></div>','<div class="mr_status_box theme">','<span class="mr_status theme">Loading ...</span>',"</div>","</div>"].join("\n")+['<div id="cbBotMessages">','<div class="loadMore theme" data-inset="20" data-step="10" style="display: none;">Load More ↻</div>','<div id="cbMessages" class="scrollbar">',"</div>","</div>"].join("\n")+['<div class="input-group">','<div class="drag-active-wrapper">','<button type="button" data-action="sleep" class="cb_bot material-icons">','<span class="iconify bot-line" data-icon="uil:line-alt" style="display: none"></span>','<span class="iconify" ><img id="mrImg-'+a+'" src="'+s+'" width="30" height="30" class="theme"/></span>',"</button>",'<button type="button" class="cb_info material-icons">','<span class="iconify" data-icon="icomoon-free:info"></span>',"</button>",'<button type="button" class="cb_cart iconify material-icons">','<span class="iconify" data-icon="mdi:cart-outline"></span>','<sup class="mr-cart-input mr-cart2 theme mr-cart-count" style="display: none"></sup>',"</button>",'<button type="button" data-action="sleep" class="mr_microphone material-icons">','<span class="iconify" data-icon="mdi:microphone-off"></span>',"</button>",'<button type="button" class="mr_menus material-icons">','<span class="iconify" data-icon="ion:menu" data-inline="false"></span>',"</button>",'<button type="button" style="display: none" class="cb_expend iconify material-icons">','<span class="iconify" data-icon="mdi:chevron-right"></span>',"</button>",'<div id="message-form" style="display: flex;width: 100%">','<input id="mrCrts" type="hidden"/>','<input id="message" placeholder="'+o+'" type="text" autocomplete="off"/>','<button  id="mr_sender" class="material-icons">','<span class="iconify" data-icon="mdi:send"></span>',"</button>","</div>","</div>","</div>"].join("\n")},singleView:function(n,a){try{let s=function(){return"product"===n?"outofstock"===a.stock_status?"OUT OF STOCK":"IN STOCK":""},o=function(){return"product"===n&&""!==a.sku?`<h5 class="att_name">SKU: ${a.sku}</h5>`:""},r=function(){return"product"!==n?"":""!==a.average_rating&&a.review_count>0?`<div class="cart-rating"> ${function(t=0){let e=parseFloat(t)/5*100;return['<div class="rating">',`<div class="rating-upper" style="width: ${parseInt(e)}%">`,"<span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>","</div>",'<div class="rating-lower">',"<span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>","</div>","</div>"].join("\n")}(a.average_rating)} <span>${a.review_count} Reviews</span></div>`:""},i=function(){if("product"!==n)return"";if(a.attributes&&Object.keys(a.attributes).length>0){let t="";return Object.keys(a.attributes).forEach(function(e){let n=a.attributes[e];t+=`<h5 class="att_name">${n.name}</h5>`,t+=`<div class="att_val"><span>${n.value.replace(/\|/gi,"</span><span>")}</span></div>`}),t}},c=(t.woo_currency,'<div class="price">'+(a.hasOwnProperty("price")?a.price:0)+"</div>"),l=a.post_title,u=(l.length>50&&l.substring(0,50),a.post_content.replace(/\[.*?\]/g,"")),m=function(){let t="instock"!==a.stock_status?"outOfStock":"inStock";return"simple"===a.product_type?`<div id="addToCart"><div class="mr-add-to-cart theme ${t}" data-stock="${t}" data-pid="${a.ID}"><span class="iconify" data-icon="fa-solid:cart-plus"></span>&nbsp;&nbsp;ADD TO CART</div></div>`:`<div class="mr-buy-now theme ${t} "><a href="${mrAssistantObj.domain}?p=${a.ID}" ${t} target="_blank"><span class="iconify" data-icon="fa-solid:cart-plus"></span>&nbsp;&nbsp;Buy Now</a></div>`},d="product"===n?"mr-single-product":"mr-single-post",p=(mrAssistantObj.domain,mrAssistantObj.upload_dir&&mrAssistantObj.upload_dir,mrAssistantObj.plugin_url+"assets/images/default.svg"),f=function(){if(a.gallery.length>0){let t='<ul class="cart-gallery">';return Object.keys(a.gallery).forEach(function(e){t+=`<li><img src="${a.gallery[e]}"></li>`}),t+="</ul>"}return""},h=function(){if(("product"===n||a.attachment)&&(""!==a.image||""!==a.attachment)){let t='<img src="'+(a.attachment?a.attachment:p)+'"/>';return['<aside class="left-set">',a.image?a.image:t,f(),"</aside>"].join("")}};e.common.typeLoader(!1);let g=function(){if(a.categories&&a.categories.length>0){let t=[];return a.categories.forEach(function(e){e.name&&t.push(e.name.toUpperCase())}),`<p class="cart-cats">${t.join(", ")}</p>`}return""},b=function(){if(a.tags&&a.tags.length>0){let t='<h5 class="att_name">Tags: </h5><div class="att_val tags_val">';return a.tags.forEach(function(e){e.name&&(t+=`<span>${e.name}</span>`)}),t+="</div>"}return""};return['<div class="single-item cb-shadow-1 '+d+'" style="display: block">','<div class="close_btn" type="button">X</div>','<section class="pop-cart">','<div class="pop-cart-container">',h(),'<aside class="right-set">',"<p>"+s()+"</p>",`<div class="name" title="${l}"><a href="${mrAssistantObj.domain+"?p="+a.ID}" target="_blank">${l}</a></div>`,g(),r(),"product"===n?c:" ",i(),"product"===n?m():" ",o(),b(),"</aside>","</div>",'<div class="description">',"product"===n?"<h4>Description</h4>":"","<p>"+u+"</p>","</div>","</section>","</div>"].join("\n")}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}},menuView:function(t,n){try{let a="menuContext"===t?"mr-single-menu-context":"mr-single-menu";mrAssistantObj.domain;if(mrAssistantObj.upload_dir&&mrAssistantObj.upload_dir,"redirectAction"===n.menuAction){if(n.actionContext&&""!==n.actionContext)try{if(e.common.isValidURL(n.actionContext)){new URL(n.actionContext);let t=window.open(n.actionContext,"_blank");if(t&&!t.closed&&void 0!==t.closed)return t.focus();e.init.popMessage({title:"Page Suggestion",content:"Click this button to open this page.",type:"redirect",button:"Open Page",action:n.actionContext})}}catch(t){"on"===mrAssistantObj.dev&&console.info(t)}}else if("searchAction"===n.menuAction){if(n.actionContext&&""!==n.actionContext)return e.common.setCookie("mrRobotAutoAction",0,5),e.common.setCookie("mrRobotSession",e.common.generateGUID(),5),e.controller.bot(n.actionContext,{cuAction:1,kbAction:1,sbAction:1})}else if("kb"===n.menuAction){if(n.actionContext&&""!==n.actionContext)return e.controller.bot(n.actionContext,{cuAction:0,kbAction:1,sbAction:0})}else if("help"===n.menuAction){const t=document.querySelector(".cb_info");t&&t.click()}else if("menu"===n.menuAction){const t=document.querySelector(".mr_menus");t&&t.click()}else if("cart"===n.menuAction){const t=document.querySelector(".cb_cart");t&&t.click()}else"rate"===n.menuAction&&e.form.feedbackForm("feedback");if(e.common.typeLoader(!1),n.hasOwnProperty("menuAction")&&"contextAction"!==n.menuAction){const t=document.querySelector(".alc_pop_box"),e=window.frameElement;return t&&(t.innerHTML=""),e.style.width="430px",e.style.height="100vh",""}return['<div class="single-item cb-shadow-1 '+a+'" style="display: block">','<div class="close_btn" type="button">X</div>','<section class="single-menu-item">','<div class="single-menu-title" title="'+n.menuName+'">'+n.menuName+"</div>",'<div class="single-menu-description">'+n.menuContext+"</div>","</section>","</div>"].join("\n")}catch(t){}}}}(),t.prototype.form=function(){let t=!1;function n(n={},a="",s=!1){firebase.auth().onAuthStateChanged(function(s){if(!t)return;let o=localStorage.getItem("mrAssistantChatItself");if(s||o){if(o){const t=document.querySelectorAll(".signUpForm");t&&t.forEach(t=>t.remove());let n=document.querySelector(".errors");n&&(n.innerHTML="Hello Admin!! Please log in from your admin control panel."),e.conn.setMessages("Hello Admin!! Please log in from your admin control panel.",s,"bot"),e.conn.notification("Hello Admin!! Please log in from your admin control panel.")}}else{let s="Anonymous "+Date.now().toString().substr(3),o={name:n.name||s,email:n.email||"",gdpr:n.hasOwnProperty("gdpr")?n.gdpr:0,isNewUser:!1,marge:!1,join:Date.now(),chatWay:"SignUp",method:"SignUp",type:"liveChat",lastSeen:Date.now(),status:"active",currentPage:window.location.href,browser:e.common.getBrowser(),languages:navigator.languages.join(", "),language:navigator.languages.join(","),platform:navigator.platform};firebase.auth().signInAnonymously().then(n=>{t=!1;var s=n.user;if(s){if("survey"===a){const t=document.querySelectorAll(".signUpForm");t&&t.forEach(t=>t.remove())}e.conn.notification("Success!! Now you can chat or search..."),o.uid=s.uid,firebase.database().ref("clients").child(s.uid).child("info").set(o),e.conn._conversationInit(),e.conn.setMessages("Hello "+o.name+"!! Thank you for Sign Up.",s,"bot"),e.controller.bot("_preChat",{cuAction:0,kbAction:1,sbAction:0,botAction:"all_KB"})}}).catch(function(t){"on"===mrAssistantObj.dev&&console.info(t)})}})}function a(s){s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation(),t=!0,setTimeout(function(t){var e=document.querySelectorAll(".mrSurveyForm .mr-survey-save");e&&e.forEach(t=>{t.removeEventListener("click",a,!1)})},100);let o=e.common.getObject(".cbSurveyForm .mrInput");var r=function(t){let e=/\S+@\S+\.\S+/;if(t.hasOwnProperty("name")&&t.name.length>2)return t.hasOwnProperty("email")&&e.test(t.email)?"on"===(mrAssistantObj.hasOwnProperty("gdpr_check")?mrAssistantObj.gdpr_check:"off")?t.hasOwnProperty("gdpr")&&1===t.gdpr?"valid":"Please check GDPR Compliance.":"valid":"Please add your valid email address.";return"Name must be minimum 3 letters."}(o);if("valid"===r)if(null!==firebase.auth().currentUser){let t=firebase.auth().currentUser.uid;t&&firebase.database().ref("clients").child(t).child("info").update(o)}else t&&n(o,"survey");else{let t=document.querySelector(".errors");t&&(t.innerHTML=r),e.conn.notification(r)}if(null!==firebase.auth().currentUser){const t=document.querySelectorAll(".signUpForm");t&&t.forEach(t=>t.remove())}}function s(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let e=t.target.dataset.action,n=(t.target.dataset.key,t.target.value);if("text"===e)if("email"===t.target.type){t.target.value=n.replace(/[^\w\s.@]+/g,"");/\S+@\S+\.\S+/.test(t.target.value)?t.target.style.borderColor="green":t.target.style.borderColor="red"}else t.target.value=n.replace(/[^\w\s.&-]+/g,""),""!==t.target.value?t.target.style.borderColor="green":t.target.style.borderColor="red"}function o(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),setTimeout(function(t){var e=document.querySelectorAll(".mrSurveyForm .mr-survey-save");e&&e.forEach(t=>{t.removeEventListener("click",o,!1)})},100);let n=document.getElementById("feedback-input"),a=document.querySelector("input[name='rate']:checked"),s=t.target.dataset.type;if(null!==firebase.auth().currentUser){let t=firebase.auth().currentUser,o=t.uid;o&&a.value>0?firebase.database().ref("clients").child(o).child("info").update({rate:a.value,feedback:n.value,lastSeen:Date.now()}).then(function(){if("feedbackAndSignOut"===s){const t=document.querySelector(".cbMessages");t&&(t.innerHTML=""),firebase.auth().signOut().then(function(){return r("signUp")})}e.conn.notification("Thank you for your Feedback."),e.conn.setMessages("Thank you for your Feedback.",t,"bot");const n=document.querySelectorAll(".signUpForm");n&&n.forEach(t=>t.remove())}):e.conn.notification("Please Rate Us!!")}}function r(t){e.common.mrLoader(!0),e.conn.notification("Please introduce yourself:");let n=mrAssistantObj.plugin_url+"assets/images/boy.svg",o=mrAssistantObj.hasOwnProperty("gdpr_check")?mrAssistantObj.gdpr_check:"off",r=mrAssistantObj.hasOwnProperty("gdpr")&&""!==mrAssistantObj.gdpr?mrAssistantObj.gdpr:"",i=mrAssistantObj.hasOwnProperty("policy_url")&&e.common.isValidURL(mrAssistantObj.policy_url)?`<a href="${mrAssistantObj.policy_url}" target="_blank">more</a>`:"";var c=['<div class="mrSurveyForm">','<button style="display:none" class="sf_close_btn" type="button">X</button>','<div class="cbSurveyForm ">',`<div class="signUpImg theme"><img src="${n}" width="80"/></div>`,'<div class="survey-input survey_text"><span>Please introduce yourself:</span></div>','<input type="text" data-key="name" data-action="text" class="mrInput survey-input" placeholder="Type Name..."/>','<input type="email" data-key="email" data-action="text" class="mrInput survey-input" placeholder="Type Email..."/>',"on"===o?`<label class="mrCheckBox" for="gdpr"><input required type="checkbox" id="gdpr" data-key="gdpr" data-action="checkbox" class="mrInput survey-input"/>${r+i}</label>`:"",'<div class="errors"></div>','<input type="button" class="mr-survey-save theme" value="Start Chat"/>',"</div>","</div>"].join(""),l=document.querySelector("#cbMessages"),u=document.createElement("DIV");u.setAttribute("class","signUpForm"),u.innerHTML=c;const m=document.querySelectorAll(".signUpForm");m&&m.forEach(t=>t.remove()),l.appendChild(u),setTimeout(function(t){var e=l.querySelectorAll(".mrSurveyForm .mr-survey-save");e&&e.forEach(t=>{t.addEventListener("click",a,!0)});let n=u.querySelectorAll(".cbSurveyForm .mrInput");n&&n.forEach(t=>{t.addEventListener("input",s,!0)})},2e3),e.common.mrLoader(!1)}return{signUp:n,surveyForm:r,feedbackForm:function(t=""){e.common.mrLoader(!0),"feedbackAndSignOut"===t?e.conn.notification("Please Provide your Feedback before leave chat"):e.conn.notification("Please Rate Us or Provide Feedback:");var n=['<div class="mrSurveyForm">','<button style="display:none" class="sf_close_btn" type="button">X</button>','<div class="cbSurveyForm ">',`<div class="signUpImg theme"><img src="${mrAssistantObj.plugin_url+"assets/images/boy.svg"}" width="80"/></div>`,'<div class="survey-input survey_text"><span>Please Rate Us or Provide Feedback: </span></div>','<div class="rate">','<input type="radio" id="mr_star5" name="rate" value="5"/>','<label for="mr_star5" title="5 stars">5 stars</label>','<input type="radio" id="mr_star4" name="rate" value="4"/>','<label for="mr_star4" title="4 stars">4 stars</label>','<input type="radio" id="mr_star3" name="rate" value="3"/>','<label for="mr_star3" title="3 stars">3 stars</label>','<input type="radio" id="mr_star2" name="rate" value="2"/>','<label for="mr_star2" title="2 stars">2 stars</label>','<input type="radio" id="mr_star1" name="rate" value="1"/>','<label for="mr_star1" title="1 star">1 star</label>',"</div>",'<textarea id="feedback-input" placeholder="Type Your Feedback..." rows="4" cols="30"></textarea>',`<input type="button" class="mr-survey-save theme" data-type="${t}" value="SEND FEEDBACK"/>`,"</div>","</div>"].join(""),a=document.querySelector("#cbMessages"),s=document.createElement("DIV");s.setAttribute("class","signUpForm"),s.innerHTML=n;const r=document.querySelectorAll(".signUpForm");r&&r.forEach(t=>t.remove()),a.appendChild(s),setTimeout(function(t){var e=a.querySelectorAll(".mrSurveyForm .mr-survey-save");e&&e.forEach(t=>{t.addEventListener("click",o,!0)})},2e3),e.common.mrLoader(!1)}}}(),document.addEventListener("readystatechange",e=>{if("complete"===e.target.readyState){if("mr-assistant-chat-bot-client"===document.getElementsByTagName("BODY")[0].getAttribute("data-action")){(new t).init.execute()}}})}();